<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Trello Kanban Board</title>

    <link rel="stylesheet" href="style.css" />
    <script
      type="text/javascript"
      src="/bower_components/knockout/build/knockout-raw.js"
    ></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="jquery.js" defer></script>
    <script src="application.js" defer></script>
    <script src="viewModel.js" defer></script>
    <script src="node_modules/knockout-store/dist/knockout-store.js"></script>
  </head>

  <body>
    <div class="board">
      <div class="lanes">
        <div
          class="swim-lane"
          data-bind="event: { drop: function (data, e) { return updateTask(data, e, 'TODO') }, dragover: function (data, e) { return allowDrop(e) } }"
          id="TODO"
        >
          <h3 class="heading">TODO</h3>
          <div data-bind="foreach: todos">
            <div
              data-bind="attr : { id: id }"
              class="taskCard"
              draggable="true"
              ondragstart="drag(event)"
            >
              <span data-bind="text: status"></span>
              <span data-bind="text: name"></span>
              <span data-bind="text: description"></span>
              <span data-bind="text: assigned"></span>
            </div>
          </div>
        </div>
        <div
          class="swim-lane"
          id="IN_PROGRESS"
          data-bind="event: { drop: function (data, e) { return updateTask(data, e, 'IN_PROGRESS') }, dragover: function (data, e) { return allowDrop(e) } }"
        >
          <h3 class="heading">In Progress</h3>
          <div data-bind="foreach: inprogress">
            <div
              data-bind="attr: { id: id }"
              class="taskCard"
              draggable="true"
              ondragstart="drag(event)"
            >
              <span data-bind="text: status"></span>
              <span data-bind="text: name"></span>
              <span data-bind="text: description"></span>
              <span data-bind="text: assigned"></span>
            </div>
          </div>
        </div>
        <div
          class="swim-lane"
          id="DONE"
          data-bind="event: { drop: function (data, e) { return updateTask(data, e, 'DONE') }, dragover: function (data, e) { return allowDrop(e) } }"
        >
          <h3 class="heading">Done</h3>
          <div data-bind="foreach: done">
            <div
              data-bind="attr: { id: id }"
              class="taskCard"
              draggable="true"
              ondragstart="drag(event)"
            >
              <span data-bind="text: status"></span>
              <span data-bind="text: name"></span>
              <span data-bind="text: description"></span>
              <span data-bind="text: assigned"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    drag = function (event) {
      event.dataTransfer.setData("text", event.target.id);
    };
  </script>
</html>
